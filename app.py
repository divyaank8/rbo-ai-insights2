
# RBO 2

rm_daily_nudge_rbo3 = """
ğŸ¦ RM Daily Nudge â€“ RBO-3

ğŸ‰ Congratulations! ğŸ†  
Your Region is ranked 2nd in your AO (out of 5 RBOs), 3rd in your Network, and 6th in your Circle.  
Your team has shown strong, consistent performance this month, maintaining steady CASA (89%) and Loan (65%) MTD budget achievements. However, the rising NPA trend (+18 bps) needs your urgent attention.

ğŸ“ˆ Performance Overview  
ğŸ’° Deposits: You're at the highest budget achievement in your AO and Network.  
â¬†ï¸ Advances: Achievements are close to being on track and should reach targets.  
âš ï¸ NPA: The increase is a concern and is above the peer average.  
âš™ï¸ Operational: A few branches have shown operational lapses.  

ğŸ“Œ Suggested Focus  
âœ… Maintain momentum in CASA and Loans.  
ğŸš¨ Aggressively tackle operational/compliance issues and NPA management.  

ğŸŒŸ Top Performing Branches: New Delhi Main Branch (Parliament Street), Connaught Place  
ğŸ”» Bottom Performing Branches: Saket, Janakpuri, Dwarka Sector 10  
"""

# ğŸ“Š Category-wise Deep Dive  

rm_daily_nudge_rbo3_deposits = """

ğŸ’° Deposits (CASA)  
MTD: â‚¹16.02 Cr vs Target â‚¹18 Cr ğŸ”¹ 89% Achieved â€“ Strong performance.  
â­ Top Branches: New Delhi Main, Connaught Place, Daryaganj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Pitam Pura  
ğŸ“Œ Snapshot:  
 â€¢ 8 branches <40% budget achievement; 28 branches >75% budget achievement  
 â€¢ Persistent Laggards: Badarpur, Connaught Place, Karol Bagh + 3 others  
 â€¢ New Declines:  
   â€¢ Patel Nagar: Lost major institutional account  
   â€¢ Pitam Pura: Salaried accounts moved due to better competitor package  
ğŸ› ï¸ Actions:  
 â€¢ Patel Nagar: Review & strengthen institutional client ties  
 â€¢ Pitam Pura: Deepen corporate engagement to retain salaried accounts  
 â€¢ All Laggards: Run hyper-local campaigns, tailor products to local needs  

"""

rm_daily_nudge_rbo3_advances = """

â¬†ï¸ Advances (Total)  
MTD: â‚¹9.75 Cr vs Target â‚¹15 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  

ğŸ’¼ SME Loans  
MTD: â‚¹5.2 Cr vs Target â‚¹8 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main Branch, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  
ğŸ“Œ Snapshot:  
 â€¢ 5 branches <30% budget achievement; 20 >70% budget achievement  
 â€¢ Persistent Laggards: Badarpur, Karol Bagh + 2 others  
 â€¢ New Issues:  
   â€¢ Dwarka Sec-10: High rejection rate (collateral/document gaps)  
   â€¢ Patel Nagar: TAT delays, disbursals lagging by 5 days  
ğŸ› ï¸ Actions:  
 â€¢ Dwarka: Push CGTMSE-backed options  
 â€¢ Patel Nagar: Fast-track high-ticket loans, optimize approval flow  
 â€¢ All Laggards: Run cluster-based outreach (e.g., â€œLoan Melasâ€), trade body engagement  

ğŸ  Housing Loans  
MTD: â‚¹4.88 Cr vs Target â‚¹7.55 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  
ğŸ“Œ Snapshot:  
 â€¢ 6 branches <35% budget achievement  
 â€¢ Persistent Laggards: Connaught Place, Laxmi Nagar + 1 (low market demand)  
 â€¢ New Issues:  
   â€¢ Green Park: Lost key builder tie-up  
   â€¢ Tilak Nagar: Competitor edge (rate & speed) â†’ 15% drop in apps  
ğŸ› ï¸ Actions:  
 â€¢ Green Park: Re-engage lost builder, pursue new ones  
 â€¢ Tilak Nagar: Promote transparent rates (no-hidden charges), simplify process  
 â€¢ All Laggards: Run home loan clinics, attend project launches, digitize onboarding  

ğŸš— Auto Loans  
MTD: â‚¹2.93 Cr vs Target â‚¹4.5 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  
ğŸ“Œ Snapshot:  
 â€¢ 19 branches <40% budget achievement  
 â€¢ Key Issues:  
   â€¢ Lost key dealership to competitor (better incentives, faster disbursals)  
   â€¢ Slower approval â†’ 2-day delay = dealer dissatisfaction  
ğŸ› ï¸ Actions:  
 â€¢ Re-engage dealerships, improve incentives, reduce processing time  
 â€¢ Train dealers, launch dealer-tier rewards  
 â€¢ Deploy on-site loan officers for instant approvals  
"""

rm_daily_nudge_rbo3_ops_npa = """

âš ï¸ NPA Management  
Current NPA: 1.70% ğŸ”º +18 bps vs Target 1.52% â†’ â‚¹1.5 Cr total NPA  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Saket, Narela, Dwarka Sec-10, Connaught Place  
ğŸ“Œ Snapshot:  
 â€¢ Saket: High NPA â‚¹0.18 Cr â€“ recovery/appraisal gaps  
 â€¢ Janakpuri: Personal Loan NPA â†‘ â‚¹0.15 Cr  
 â€¢ Narela: Agri NPA â†‘ â‚¹0.10 Cr (seasonal)  
 â€¢ Connaught Place: NPA% down, but actuals up â‚¹0.20 Cr â€“ disbursement spike masking risk  
ğŸ› ï¸ Actions:  
 â€¢ Rapid reviews, restructure viable cases, recover others  
 â€¢ Boost early warning triggers, tighten underwriting  
 â€¢ Intensify collections, legal action, post-disbursal checks  

ğŸ§ ATM Availability  
Uptime: 91.5% vs Target 95% â†’ 50 outages across 40 branches ğŸ”º Target <20  
â­ Top ATMs: New Delhi Main, Karol Bagh, Civil Lines  
ğŸ”» Bottom ATMs: Laxmi Nagar, Uttam Nagar  
ğŸ“Œ Snapshot:  
 â€¢ Laxmi Nagar: 15 outages â€“ poor connectivity, old hardware  
 â€¢ Sarojini Nagar, Shastri Nagar: Major cash-outs due to poor forecasting  
ğŸ› ï¸ Actions:  
 â€¢ Use volume-based forecasting for cash replenishment  
 â€¢ Audit & upgrade outdated ATMs  
 â€¢ Strengthen monitoring, review vendor for strict adherence to service  

"""
# RBO 2

rm_daily_nudge_rbo1 = """
ğŸ¦ RM Daily Nudge â€“ RBO-1

ğŸ‰ Congratulations! ğŸ†  
Your Region is ranked 2nd in your AO (out of 5 RBOs), 3rd in your Network, and 6th in your Circle.  
Your team has shown strong, consistent performance this month, maintaining steady CASA (89%) and Loan (65%) MTD budget achievements. However, the rising NPA trend (+18 bps) needs your urgent attention.

ğŸ“ˆ Performance Overview  
ğŸ’° Deposits: You're at the highest budget achievement in your AO and Network.  
â¬†ï¸ Advances: Achievements are close to being on track and should reach targets.  
âš ï¸ NPA: The increase is a concern and is above the peer average.  
âš™ï¸ Operational: A few branches have shown operational lapses.  

ğŸ“Œ Suggested Focus  
âœ… Maintain momentum in CASA and Loans.  
ğŸš¨ Aggressively tackle operational/compliance issues and NPA management.  

ğŸŒŸ Top Performing Branches: New Delhi Main Branch (Parliament Street), Connaught Place  
ğŸ”» Bottom Performing Branches: Saket, Janakpuri, Dwarka Sector 10  
"""

# ğŸ“Š Category-wise Deep Dive  

rm_daily_nudge_rbo1_deposits = """

ğŸ’° Deposits (CASA)  
MTD: â‚¹16.02 Cr vs Target â‚¹18 Cr ğŸ”¹ 89% Achieved â€“ Strong performance.  
â­ Top Branches: New Delhi Main, Connaught Place, Daryaganj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Pitam Pura  
ğŸ“Œ Snapshot:  
 â€¢ 8 branches <40% budget achievement; 28 branches >75% budget achievement  
 â€¢ Persistent Laggards: Badarpur, Connaught Place, Karol Bagh + 3 others  
 â€¢ New Declines:  
   â€¢ Patel Nagar: Lost major institutional account  
   â€¢ Pitam Pura: Salaried accounts moved due to better competitor package  
ğŸ› ï¸ Actions:  
 â€¢ Patel Nagar: Review & strengthen institutional client ties  
 â€¢ Pitam Pura: Deepen corporate engagement to retain salaried accounts  
 â€¢ All Laggards: Run hyper-local campaigns, tailor products to local needs  

"""

rm_daily_nudge_rbo1_advances = """

â¬†ï¸ Advances (Total)  
MTD: â‚¹9.75 Cr vs Target â‚¹15 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  

ğŸ’¼ SME Loans  
MTD: â‚¹5.2 Cr vs Target â‚¹8 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main Branch, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  
ğŸ“Œ Snapshot:  
 â€¢ 5 branches <30% budget achievement; 20 >70% budget achievement  
 â€¢ Persistent Laggards: Badarpur, Karol Bagh + 2 others  
 â€¢ New Issues:  
   â€¢ Dwarka Sec-10: High rejection rate (collateral/document gaps)  
   â€¢ Patel Nagar: TAT delays, disbursals lagging by 5 days  
ğŸ› ï¸ Actions:  
 â€¢ Dwarka: Push CGTMSE-backed options  
 â€¢ Patel Nagar: Fast-track high-ticket loans, optimize approval flow  
 â€¢ All Laggards: Run cluster-based outreach (e.g., â€œLoan Melasâ€), trade body engagement  

ğŸ  Housing Loans  
MTD: â‚¹4.88 Cr vs Target â‚¹7.55 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  
ğŸ“Œ Snapshot:  
 â€¢ 6 branches <35% budget achievement  
 â€¢ Persistent Laggards: Connaught Place, Laxmi Nagar + 1 (low market demand)  
 â€¢ New Issues:  
   â€¢ Green Park: Lost key builder tie-up  
   â€¢ Tilak Nagar: Competitor edge (rate & speed) â†’ 15% drop in apps  
ğŸ› ï¸ Actions:  
 â€¢ Green Park: Re-engage lost builder, pursue new ones  
 â€¢ Tilak Nagar: Promote transparent rates (no-hidden charges), simplify process  
 â€¢ All Laggards: Run home loan clinics, attend project launches, digitize onboarding  

ğŸš— Auto Loans  
MTD: â‚¹2.93 Cr vs Target â‚¹4.5 Cr ğŸ”¹ 65% Achieved  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Badarpur, Connaught Place, Karol Bagh, Patel Nagar, Dwarka Sec-10  
ğŸ“Œ Snapshot:  
 â€¢ 19 branches <40% budget achievement  
 â€¢ Key Issues:  
   â€¢ Lost key dealership to competitor (better incentives, faster disbursals)  
   â€¢ Slower approval â†’ 2-day delay = dealer dissatisfaction  
ğŸ› ï¸ Actions:  
 â€¢ Re-engage dealerships, improve incentives, reduce processing time  
 â€¢ Train dealers, launch dealer-tier rewards  
 â€¢ Deploy on-site loan officers for instant approvals  
"""

rm_daily_nudge_rbo1_ops_npa = """

âš ï¸ NPA Management  
Current NPA: 1.70% ğŸ”º +18 bps vs Target 1.52% â†’ â‚¹1.5 Cr total NPA  
â­ Top Branches: New Delhi Main, Rohini Sec-7, Vasant Kunj  
ğŸ”» Bottom Branches: Saket, Narela, Dwarka Sec-10, Connaught Place  
ğŸ“Œ Snapshot:  
 â€¢ Saket: High NPA â‚¹0.18 Cr â€“ recovery/appraisal gaps  
 â€¢ Janakpuri: Personal Loan NPA â†‘ â‚¹0.15 Cr  
 â€¢ Narela: Agri NPA â†‘ â‚¹0.10 Cr (seasonal)  
 â€¢ Connaught Place: NPA% down, but actuals up â‚¹0.20 Cr â€“ disbursement spike masking risk  
ğŸ› ï¸ Actions:  
 â€¢ Rapid reviews, restructure viable cases, recover others  
 â€¢ Boost early warning triggers, tighten underwriting  
 â€¢ Intensify collections, legal action, post-disbursal checks  

ğŸ§ ATM Availability  
Uptime: 91.5% vs Target 95% â†’ 50 outages across 40 branches ğŸ”º Target <20  
â­ Top ATMs: New Delhi Main, Karol Bagh, Civil Lines  
ğŸ”» Bottom ATMs: Laxmi Nagar, Uttam Nagar  
ğŸ“Œ Snapshot:  
 â€¢ Laxmi Nagar: 15 outages â€“ poor connectivity, old hardware  
 â€¢ Sarojini Nagar, Shastri Nagar: Major cash-outs due to poor forecasting  
ğŸ› ï¸ Actions:  
 â€¢ Use volume-based forecasting for cash replenishment  
 â€¢ Audit & upgrade outdated ATMs  
 â€¢ Strengthen monitoring, review vendor for strict adherence to service  

"""
# Dictionary mapping for easy handling
rbo_summaries = {
    "RBO-1": rm_daily_nudge_rbo1,
    # "RBO-2": rm_daily_nudge_rbo2,
    "RBO-3": rm_daily_nudge_rbo3,
}

rbo_deep_dives = {
    "RBO-3": {
        "Deposits": rm_daily_nudge_rbo3_deposits,
        "Advances": rm_daily_nudge_rbo3_advances,
        "NPA & Ops": rm_daily_nudge_rbo3_ops_npa,
    },
        "RBO-1": {
        "Deposits": rm_daily_nudge_rbo1_deposits,
        "Advances": rm_daily_nudge_rbo1_advances,
        "NPA & Ops": rm_daily_nudge_rbo1_ops_npa,
    }
    # You can add "RBO-1": {...} and "RBO-2": {...} as needed
}

import streamlit as st

# -------------------------------------------
# âœ… Must be the first Streamlit command
# -------------------------------------------
st.set_page_config(page_title="RBOgen AI â€“ SBI Regional Insights", layout="wide")

# -------------------------------------------
# ğŸ¨ SBI Color Theme
# -------------------------------------------
SBI_BLUE = "#002f6c"        # Primary SBI blue
SBI_ACCENT = "#0078d7"      # Accent blue
SBI_BG = "#f4f6f9"          # Light background
SBI_CARD_BG = "#e6f0fa"     # Card background

# -------------------------------------------
# ğŸ”§ Custom CSS Styling
# -------------------------------------------
st.markdown(f"""
<style>
    /* Overall Background + Text Theme */
    body, .stApp {{
        background-color: {SBI_BG};
        color: {SBI_BLUE};
        font-family: 'Segoe UI', sans-serif;
    }}

    /* Headings and emphasis */
    .stRadio > label,
    .stSelectbox > label,
    .stMultiSelect > label,
    .stExpander > summary,
    .stTitle, h1, h2, h3, h4 {{
        color: {SBI_BLUE};
        font-weight: 600;
    }}

    /* Card summary box */
    .custom-summary-box {{
        background-color: {SBI_CARD_BG};
        border-left: 5px solid {SBI_ACCENT};
        padding: 1rem 1.5rem;
        border-radius: 10px;
        margin-top: 0.5rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        color: {SBI_BLUE};
    }}

    /* Radio Button Group â€“ Circle & Selected Color */
    div[role="radiogroup"] > label[data-baseweb="radio"] > div:first-child {{
        border: 2px solid {SBI_BLUE} !important;
    }}
    div[role="radiogroup"] > label[data-baseweb="radio"] > div:first-child svg {{
        fill: {SBI_BLUE} !important;
        color: {SBI_BLUE} !important;
    }}
    [data-baseweb="radio"]:hover > div:first-child {{
        border-color: {SBI_ACCENT} !important;
        box-shadow: 0 0 0 2px rgba(77, 180, 255, 0.4) !important;
    }}

    /* Multiselect Tag Styling */
    span[data-baseweb="tag"] {{
        background-color: {SBI_BLUE} !important;
        color: white !important;
        border-radius: 6px !important;
        font-weight: 600 !important;
        border: none !important;
    }}
    span[data-baseweb="tag"] svg {{
        color: white !important;
    }}

    /* Dropdown borders and hover color */
    .css-1d391kg, .css-13cymwt-control {{
        border: 1px solid {SBI_BLUE} !important;
        box-shadow: none !important;
    }}

    .css-1n6sfyn-option:hover, .css-1n6sfyn-option[aria-selected="true"] {{
        background-color: #d6e9fb !important;
        color: {SBI_BLUE} !important;
    }}

    .css-1wa3eu0-placeholder, 
    .css-1uccc91-singleValue {{
        color: {SBI_BLUE} !important;
    }}

</style>
""", unsafe_allow_html=True)

# -------------------------------------------
# ğŸ“Š Main UI Layout
# -------------------------------------------

st.title("RBO IntelliAI")
st.markdown("##### GenAI Insights for Regional Business Offices")

# ğŸ’¡ Icon mapping for deep dive sections
deep_dive_icons = {
    "Deposits": "ğŸ’°",
    "Advances": "â¬†ï¸",
    "NPA & Ops": "ğŸ› ï¸",
    "NPA": "ğŸ“‰",
    "Cross-Sell & Digital": "ğŸ“±",
    "Compliance": "âœ…",
}

# ------------------------------
# ğŸ—‚ï¸ RBO Selection Panel
# ------------------------------
with st.container():
    # RBO Selector â€“ Full Width Row
    # st.markdown("### ğŸ—‚ï¸ Select RBO")
    st.markdown('<h4 class="SBI_ACCENT">ğŸ—‚ï¸ Select RBO</h4>', unsafe_allow_html=True)

    selected_rbo = st.radio(
        "Select RBO:",
        options=["RBO-1", "RBO-3"],
        horizontal=True
    )

    # Spacer or Divider
    # st.markdown("---")

    # RBO Summary â€“ Full Width Row
    st.markdown("### ğŸ“‹ RBO Summary")
    st.markdown(
        f"""<div class='custom-summary-box'>{rbo_summaries[selected_rbo]}</div>""",
        unsafe_allow_html=True
    )

# ------------------------------
# ğŸ” Deep Dive Panel
# ------------------------------
# --------------------------------
# ğŸ” Deep Dive Panel
# --------------------------------
if selected_rbo in rbo_deep_dives:
    st.markdown("---")
    st.markdown("### ğŸ” Deep Dive Analysis")

    deep_dive_options = list(rbo_deep_dives[selected_rbo].keys())
    
    # Select all by default
    selected_deep_dives = st.multiselect(
        "Select one or more deep dive categories:",
        options=deep_dive_options,
        default=deep_dive_options,  # select all
        help="Choose specific performance areas to explore."
    )

    # Show all selected categories collapsed
    for dive in selected_deep_dives:
        icon = deep_dive_icons.get(dive, "ğŸ“‚")  # fallback icon
        with st.expander(f"{icon} {dive}", expanded=False):  # collapsed by default
            st.markdown(rbo_deep_dives[selected_rbo][dive])
else:
    st.warning("ğŸš§ Deep dive insights not yet available for this RBO.")